---
import { getCollection } from "astro:content";
import Layout from "../layout.astro";
import Socials from "../socials.astro";

const posts = await getCollection("blog");
const sortedPosts = posts.sort(
  (a, b) => b.data.date.valueOf() - a.data.date.valueOf(),
);
---

<Layout title="Bogdan Chadkin - Software Engineer">
  <main class="main-container">
    <div class="hero">
      <h1 class="title">Bogdan Chadkin</h1>
      <p class="subtitle" data-index-hero-subtitle>
        aka TrySound, Software Engineer
      </p>
      <p class="description">
        Building fast, accessible user interfaces and scalable front-end
        architecture. 10+ years of experience with a passion for performance,
        web standards, and developer experience.
      </p>
      <div class="cta">
        <a href="/hire-me" class="cta-button">Hire Me</a>
      </div>
    </div>

    {
      sortedPosts.length > 0 && (
        <section class="blog-section">
          <h2 class="section-title">Latest Writing</h2>
          <div class="blog-list">
            {sortedPosts.map((post) => (
              <article class="card">
                <a href={`/${post.slug}/`} class="card-link">
                  <time
                    class="card-subtitle"
                    datetime={post.data.date.toISOString()}
                  >
                    {post.data.date.toLocaleDateString("en-US", {
                      year: "numeric",
                      month: "short",
                      day: "numeric",
                    })}
                  </time>
                  <h3 class="card-title">{post.data.title}</h3>
                  <p class="card-description">{post.data.description}</p>
                </a>
              </article>
            ))}
          </div>
        </section>
      )
    }
  </main>

  <footer class="footer">
    <Socials />
  </footer>
</Layout>

<script>
  import { PowerGlitch } from "powerglitch";

  PowerGlitch.glitch("[data-index-hero-subtitle]", {
    playMode: "hover",
  });
</script>

<style>
  .main-container {
    min-height: 100vh;
    padding: 2rem;
    max-width: 800px;
    margin: 0 auto;
  }

  .hero {
    text-align: center;
    padding: 4rem 0;
  }

  .title {
    font-size: 3rem;
    font-weight: 700;
    margin-bottom: 0.5rem;
    color: var(--text-primary);
    letter-spacing: -0.02em;
  }

  .subtitle {
    font-size: 1.25rem;
    color: var(--accent);
    font-weight: 500;
    margin-bottom: 1.5rem;
  }

  .description {
    font-size: 1.1rem;
    color: var(--text-secondary);
    line-height: 1.7;
    margin-bottom: 2rem;
    max-width: 600px;
    margin-left: auto;
    margin-right: auto;
  }

  .cta {
    display: flex;
    gap: 1rem;
    justify-content: center;
    align-items: center;
    flex-wrap: wrap;
  }

  .blog-section {
    padding: 2rem 0;
    border-top: 1px solid var(--border);
  }

  .blog-title {
    font-size: 1.5rem;
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: 1.5rem;
    text-align: center;
  }

  .blog-list {
    display: flex;
    flex-direction: column;
    gap: 1rem;
  }

  @media (max-width: 480px) {
    .title {
      font-size: 2.5rem;
    }

    .description {
      font-size: 1rem;
    }

    .hero {
      padding: 2rem 0;
    }
  }
</style>
